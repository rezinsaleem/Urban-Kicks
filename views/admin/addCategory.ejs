<%- include('../partials/adminHead') -%>
<style>
 h2{
    color: #3086d5;
  }
</style>


<main role="main" class="main-content">
  <div class="container mt-5">
    <h2>Add Category</h2>
    <form action="/admin/newcategory" method="POST" enctype="application/x-www-form-urlencoded"  onsubmit="return validateForm()">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name" name="name" required>
        <div id="nameError" class="text-danger"></div>
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea class="form-control" id="description" name="description" required></textarea>
        <div id="descriptionError" class="text-danger"></div>
      </div>
      <div class="form-group ">
        <label for="price">Discount:   (in Percentage)</label>
        <input type="number" class="form-control" id="discount" name="discount" min="0" required>
        <div id="discountError" class="text-danger"></div>
        </div>
      <button type="submit" class="btn btn-primary">Add Category</button>
    </form>
</div>
<div id="flashdiv" class="text-center mt-4">
  <% if (errorMessages && errorMessages.length> 0) { %>
      <% errorMessages.forEach(message=> { %>
        <p style="color:red;">
          <%= message %>
        </p>
        <% }); %>
          <% } %>
</div>
</main>
</div>

<script>
  function validateForm() {
    var name = document.getElementById('name').value;
    var description = document.getElementById('description').value;
    var nameError = document.getElementById('nameError');
    var descriptionError = document.getElementById('descriptionError');

    // Reset error messages
    nameError.innerHTML = '';
    descriptionError.innerHTML = '';

    // Validate name
    if (name.trim() === '') {
      nameError.innerHTML = 'Name is required.';
      return false;
    } else if (/\d/.test(name)) {
      nameError.innerHTML = 'Name must not contain numbers.';
      return false;
    }

    // Validate description
    if (description.trim() === '') {
      descriptionError.innerHTML = 'Description is required.';
      return false;
    }

    return true;
  }
</script>


<%- include('../partials/adminFooter') -%>