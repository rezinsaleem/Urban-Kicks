<%- include('../partials/adminHead') -%>

<main role="main" class="main-content">
  <div class="container mt-5">
    <h2 class="mb-4">Update Product</h2>
    <form action="/admin/updateproduct/<%= product._id%>" method="POST" enctype="application/x-www-form-urlencoded">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name" name="name" value="<%= product.name %>" required>
      </div>
     
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea class="form-control" id="description" name="description" required><%= product.description %></textarea>

      </div>
      <div class="form-group">
        <label for="price">Price:</label>
        <input type="number" class="form-control" id="price" name="price"  value="<%= product.price %>" min="0" required>
      </div>
      <div class="form-group">
        <label for="stock">Stock:</label>
        <input type="number" class="form-control" id="stock" name="stock"  value="<%= product.stock %>" min="0" required>
      </div>
      <div class="form-group mb-4">
        <label for="image">Image:</label><br>
        <% product.image.forEach(item=>{ %>
          <img style=" width: 100px;height: 100px;" src="/<%= item %>">
          <% }) %>
      </div>
      <a href="/admin/editimage/<%= product._id %>" class="btn btn-danger btn-xs">Edit Images</a>
      <button type="submit" class="btn btn-primary mx-2">update product</button>
    </form>
  </div>
 
</main>
</div>


<script>

const form = document.querySelector('form');

form.addEventListener('submit', async (event) => {
  event.preventDefault(); // Prevent the default form submission

  try {

    // Display success Swal
    await Swal.fire({
      icon: 'success',
      title: 'Product updated Successfully',
      showConfirmButton: false,
      timer: 1000
    });

    // After displaying the success Swal, submit the form
    form.submit();
  } catch (error) {
    console.error('Error:', error);
    
  }
});

  </script>
  <!-- Bootstrap JS -->
  
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <%- include('../partials/adminFooter') -%>