<%- include('../partials/adminHead') -%>

<style>
   h2{
    color: #3086d5;
  }
</style>

<main role="main" class="main-content">
<div class="container mt-5">
  <div class="container mt-5">
    <h2>Edit Sub-Category</h2>
    <form action="/admin/updateSubCategory/<%= subcategory._id %>" method="POST" enctype="application/x-www-form-urlencoded">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name" name="name" value="<%= subcategory.name %>" required>
      </div>
      <div class="form-group">
        <label for="parentCategory" class="form-label">Parent Category:</label>
        <select class="form-select" id="parentCategory" name="parentCategory" required >
          <option value="" disabled selected>
            select parent category
          </option>
          <% pcategory.forEach(category => { %>
          <option value="<%= category._id %>">
            <%= category.name %>
          </option>
          <% }); %>
        </select>
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea class="form-control" id="description" name="description" required><%= subcategory.description %></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Update Sub-Category</button>
    </form>
</div>

</main>
</div>


<script>

  const form = document.querySelector('form');
  
  form.addEventListener('submit', async (event) => {
    event.preventDefault(); // Prevent the default form submission
  
    try {
  
      // Display success Swal
      await Swal.fire({
        icon: 'success',
        title: 'Category updated Successfully',
        showConfirmButton: false,
        timer: 1000
      });
  
      // After displaying the success Swal, submit the form
      form.submit();
    } catch (error) {
      console.error('Error:', error);
      
    }
  });
  
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<%- include('../partials/adminFooter') -%>