<%- include('../partials/userHeader') -%>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">





  <div class="colorlib-loader"></div>

  <div id="page">
    <nav class="colorlib-nav" role="navigation">
      <div class="top-menu">
        <div class="container">
          <div class="row">
            <div class="col-sm-7 col-md-9">
              <div id="colorlib-logo"><a href="/">Urban Kicks</a></div>
            </div>
            <div class="col-sm-5 col-md-3">
              <form action="/" id="searchForm" class="search-wrap">
								<div class="form-group">
									 <input type="search" name="search" id="searchInput" class="form-control search"  placeholder="Search" >
									 <button class="btn btn-primary submit-search text-center" type="submit"><i class="icon-search"></i></button>
								</div>
						 </form>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 text-left menu-1">
              <ul>
                <li class="<%= currentPage === 'home' ? 'active' : '' %>"><a href="/">Home</a></li>
                <% categories.forEach(category=> { %>
                  <li class="<%= currentPage === category.id ? 'active' : '' %>"><a href="/shop/<%= category.id %>">
                      <%= category.name %>
                    </a></li>
                  <% }); %>
                    <li class="<%= currentPage === 'about' ? 'active' : '' %>"><a href="/about">About</a></li>
                    <li class="<%= currentPage === 'contact' ? 'active' : '' %>"><a href="/contact">Contact</a></li>
                    <li class="cart <%= currentPage === 'cart' ? 'active' : '' %>"><a href="/cart"><i
                          class="icon-shopping-cart"></i><% if (itemCount&&itemCount>0) { %>
                            <span class="count">[<%= itemCount %>]</span> 
                          <% } %></a></li></a></li>
                    <li class="wishlist <%= currentPage === 'wishlist' ? 'active' : '' %>"><a href="/wishlist"><i
                          class="icon-heart2"></i></a></li>
                    <li class="user-profile <%= currentPage === 'profile' ? 'active' : '' %>"><a href="/profile"><i
                          class="icon-user2"></i></a></li>

              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="sale">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 offset-sm-2 text-center">
              <div class="row">
                <div class="owl-carousel2">
                  <div class="item">
                    <div class="col">
                      <h3><a href="#">25% off (Almost) Everything! Use Code: Summer Sale</a></h3>
                    </div>
                  </div>
                  <div class="item">
                    <div class="col">
                      <h3><a href="#">Our biggest sale yet 50% off all summer shoes</a></h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="breadcrumbs">
      <div class="container">
        <div class="row">
          <div class="col">
            <p class="bread"><span><a href="/">Home</a></span> / <span>Address</span></p>
          </div>
        </div>
      </div>
    </div>

    <br>

    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h3 class="text-center">User Address</h3>
          <% if (successMessages && successMessages.length> 0) { %>
            <% successMessages.forEach((message, index)=> { %>
              <div class="alert alert-success alert-dismissible fade show" role="alert">
                <button class="btn-close mt-2" style="float: right;" type="button" data-bs-dismiss="alert"
                  aria-label="close"></button>
                <span style="font-weight: bold;">
                  <%= message %>
                </span>
              </div>
              <% }); %>
                <% } %>
                  <% if (errorMessages && errorMessages.length> 0) { %>
                    <% errorMessages.forEach((message, index)=> { %>
                      <div class="alert alert-danger alert-dismissible fade show" role="alert">
                        <button class="btn-close mt-2" style="float: right;" type="button" data-bs-dismiss="alert"
                          aria-label="close"></button>
                        <span style="font-weight: bold;">
                          <%= message %>
                        </span>
                      </div>
                      <% }); %>
                        <% } %>

                          <% if (userData && userData.address) { %>
                            <% userData.address.forEach((address)=> { %>
                              <div class="card mt-3" style=" box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                  <h5 class="m-0">Address: <%= address.save_as %>
                                  </h5>
                                  <div>
                                    <a href="/editAddress/<%= address._id %>">
                                      <i class="fas fa-edit mr-3" style="font-size: 1.5rem;"></i>
                                    </a>
                                    <a onclick="deleteAddress('<%= address._id %>' )">
                                      <i class="fas fa-trash-alt text-danger" style="font-size: 1.5rem;" ></i>
                                    </a>
                                  </div>
                                </div>
                                <div class="card-body">
                                  <h5 class="card-title">Name: <%= address.name %>
                                  </h5>
                                  <p class="card-text">Email: <%= address.email %>
                                  </p>
                                  <p class="card-text">Mobile No: <%= address.mobile %>
                                  </p>
                                  <p class="card-text">House Name: <%= address.housename %>
                                  </p>
                                  <p class="card-text">Street: <%= address.street %>
                                  </p>
                                  <p class="card-text">City: <%= address.city %>
                                  </p>
                                  <p class="card-text">State: <%= address.state %>
                                  </p>
                                  <p class="card-text">Country: <%= address.country %>
                                  </p>
                                  <p class="card-text">Zip Code: <%= address.pincode %>
                                  </p>
                                </div>
                              </div>
                              <% }); %>
                                <% } else { %>
                                  <p class="mt-3">No addresses found for this user.
                                  </p>
                                  <% } %>
                                    <a href="/addAddress" class="btn btn-primary btn-md mt-3">Add
                                      Address</a>
                                    </div>
                                  </div>
                                </div>
                                <br><br>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      function deleteAddress(id ){
      Swal.fire({
              title: "Are you sure?",
              text: "Are you sure you want to proceed?",
              icon: "warning",
              showCancelButton: true,
              confirmButtonColor: "#3085d6",
              cancelButtonColor: "#d33",
              confirmButtonText: "Confirm",
              cancelButtonText: "Cancel",
              dangerMode: true,
          }).then((result) => {
              if (result.isConfirmed) {
                  window.location.href = "/deleteAddress/"+id;
              } else {
                  console.log("User canceled");
              }
          });
      }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  
    <%- include('../partials/userFooter') -%>